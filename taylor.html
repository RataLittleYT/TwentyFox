<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Flappy Taylor</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(#f8c8dc, #d8b4e2);
    font-family: sans-serif;
  }
  canvas {
    display: block;
  }
  #gameOver {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    color: white;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
  }
  #gameOver button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    background: linear-gradient(45deg, #ff69b4, #ba55d3);
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 10px #fff;
  }
  footer {
    position: absolute;
    bottom: 5px;
    width: 100%;
    text-align: center;
    color: white;
    font-size: 14px;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="gameOver">
  <h1>üíî Game Over üíî</h1>
  <button onclick="restartGame()">Reintentar</button>
</div>
<footer>Hecho con ‚ù§Ô∏è para Ashly de parte de A.T√©llez</footer>
<audio id="bgMusic" src="gg.mp3" loop></audio>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const taylorImg = new Image();
taylorImg.src = 'https://i.ibb.co/hFgSLZ17/imagen-2025-08-14-233139654.png';

const coinImg = new Image();
coinImg.src = 'https://i.ibb.co/Q7wszCVC/imagen-2025-08-14-233346327.png';

let player = { x: 50, y: canvas.height/2, w: 50, h: 50, dy: 0 };
let gravity = 0.5;
let jump = -8;
let pipes = [];
let coins = [];
let pipeGap = 200;
let speed = 3;
let score = 0;
let gameOver = false;

function createPipe() {
  let pipeHeight = Math.random() * (canvas.height - pipeGap - 100) + 50;
  pipes.push({x: canvas.width, y: 0, w: 60, h: pipeHeight});
  pipes.push({x: canvas.width, y: pipeHeight + pipeGap, w: 60, h: canvas.height - pipeHeight - pipeGap});
  coins.push({x: canvas.width + 30, y: pipeHeight + pipeGap/2 - 15, w: 30, h: 30});
}

function drawPlayer() {
  ctx.drawImage(taylorImg, player.x, player.y, player.w, player.h);
}

function drawPipes() {
  ctx.fillStyle = '#ff69b4';
  pipes.forEach(pipe => {
    let grad = ctx.createLinearGradient(pipe.x, pipe.y, pipe.x + pipe.w, pipe.y + pipe.h);
    grad.addColorStop(0, '#ff69b4');
    grad.addColorStop(1, '#ba55d3');
    ctx.fillStyle = grad;
    ctx.fillRect(pipe.x, pipe.y, pipe.w, pipe.h);
  });
}

function drawCoins() {
  coins.forEach(coin => {
    ctx.drawImage(coinImg, coin.x, coin.y, coin.w, coin.h);
  });
}

function update() {
  if (gameOver) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  player.dy += gravity;
  player.y += player.dy;
  if (player.y + player.h > canvas.height) endGame();

  pipes.forEach(pipe => {
    pipe.x -= speed;
    if (collision(player, pipe)) endGame();
  });

  coins.forEach((coin, i) => {
    coin.x -= speed;
    if (collision(player, coin)) {
      score++;
      coins.splice(i, 1);
    }
  });

  pipes = pipes.filter(pipe => pipe.x + pipe.w > 0);
  coins = coins.filter(coin => coin.x + coin.w > 0);

  drawPipes();
  drawCoins();
  drawPlayer();

  ctx.fillStyle = '#fff';
  ctx.font = '24px sans-serif';
  ctx.fillText('Score: ' + score, 20, 40);

  requestAnimationFrame(update);
}

function collision(a, b) {
  return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y;
}

function jumpPlayer() {
  player.dy = jump;
}

function endGame() {
  gameOver = true;
  document.getElementById('gameOver').style.display = 'flex';
}

function restartGame() {
  pipes = [];
  coins = [];
  player.y = canvas.height / 2;
  player.dy = 0;
  score = 0;
  gameOver = false;
  document.getElementById('gameOver').style.display = 'none';
  update();
}

setInterval(createPipe, 2000);
update();

canvas.addEventListener('touchstart', jumpPlayer);
canvas.addEventListener('mousedown', jumpPlayer);

window.onload = () => {
  document.getElementById('bgMusic').play();
};
</script>
</body>
</html>
